# Onion Shop Bot

Telegram бот для продажи аккаунтов с интеграцией CryptoBot для приема платежей.

## Структура проекта

```
cursorshop4/
├── main.py              # Точка входа в приложение
├── config.py            # Конфигурация (константы)
├── handlers.py          # Обработчики команд и callback'ов
├── database.py          # Работа с пользователями и балансами
├── payments.py          # Интеграция с CryptoBot
├── requirements.txt     # Зависимости Python
├── users.json           # База данных пользователей
└── data/                # Папка с товарами
    ├── anibis/          # Аккаунты Anibis
    ├── ricardo/         # Аккаунты Ricardo
    ├── tutti/           # Аккаунты Tutti
    └── whatsapp/        # Аккаунты WhatsApp
```

## Установка и настройка

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Конфигурация

Все настройки задаются в `config.py` константами:

```python
BOT_TOKEN = "..."
ADMIN_ID = 0
CRYPTOBOT_API_TOKEN = "..."
CHANNEL_ID = 0
CHANNEL_USERNAME = "cursorshop"
```

Отредактируйте значения под себя.

### 3. Запуск бота

```bash
python main.py
```

## Функциональность

### Для пользователей:
- ✅ Проверка подписки на канал
- ✅ Просмотр категорий товаров
- ✅ Покупка аккаунтов за внутреннюю валюту
- ✅ Пополнение баланса через CryptoBot
- ✅ Просмотр профиля и баланса

### Для администратора:
- ✅ Управление балансами пользователей (`/admin`)
- ✅ Загрузка товаров (отправка .txt файлов)

## Категории товаров

| Категория | Цена | Папка |
|-----------|------|-------|
| Anibis Selfreg | 5$ | `data/anibis/` |
| Ricardo Selfreg | 20$ | `data/ricardo/` |
| Tutti Selfreg | 15$ | `data/tutti/` |
| WhatsApp Selfreg | 25$ | `data/whatsapp/` |

## Команды

- `/start` - Запуск бота и проверка подписки
- `/admin` - Админ-панель (только для администратора)

## Технические детали

- **Фреймворк**: aiogram 3.4.1
- **Платежи**: CryptoBot API
- **Хранение данных**: JSON файлы
- **Состояния**: FSM (Finite State Machine)

## Безопасность

- Конфигурация хранится в `config.py` (при необходимости шифруйте/переносите в переменные окружения)
- Проверка прав администратора
- Валидация входных данных
- Обработка ошибок

## Поддержка

По всем вопросам обращайтесь к @nofumez
